# Opticaldevicelib üî¶
–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∞-–∫–æ–¥ [opticaldevicelib](https://github.com/mamichberdey/Optical_device/blob/main/opticaldevicelib.py), –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –æ–ø—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ö–µ–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ–Ω—Ç–≥–µ–Ω–æ–≤—Å–∫–æ–≥–æ –∏–∑–ª—É—á–µ–Ω–∏—è.
–í —Å—Ö–µ–º–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è: —Ç–æ—á–µ—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å –∑–∞–¥–∞–Ω–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π –∏–ª–∏ –¥–ª–∏–Ω–æ–π –≤–æ–ª–Ω—ã, –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∏–µ [CRL –ª–∏–Ω–∑—ã](https://en.wikipedia.org/wiki/Compound_refractive_lens) –∏ —Ç.–¥.
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏—è —Ç–æ–ø–æ–ª–æ–≥–∏–∏ - —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏, —Å–¥–≤–∏–≥–∏ –∏ –ø–æ–≤–æ—Ä–æ—Ç—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
–¢–∞–∫–∂–µ –∏–º–µ–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞ –≤–ª–∏—è–Ω–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏—è —Ç–æ–ø–æ–ª–æ–≥–∏–∏ –ª–∏–Ω–∑—ã –Ω–∞ –∏–∑–ª—É—á–µ–Ω–∏–µ.
–ë—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ —Ç–∞–∫–∏–µ –∫–∞–∫ JIT-–∫–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ FFT –Ω–∞ CUDA.

### –ê–ø—Ä–æ–±–∞—Ü–∏—è
–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –±—ã–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ [–¥–∏–ø–ª–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞](https://github.com/mamichberdey/Optical_device/blob/main/diploma.pdf) –∏ [–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è](https://github.com/mamichberdey/Optical_device/blob/main/presentation.pdf). –î–∏–ø–ª–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±—ã–ª–∞ –∑–∞—â–∏—â–µ–Ω–∞ –Ω–∞ –æ—Ç–ª–∏—á–Ω–æ, –∞ —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–±–æ—Ç–æ–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –≤ —Ä–∞–º–∫–∞—Ö [—É–Ω–∏–≤–µ—Ä—Å–∏–∞–¥—ã "–õ–æ–º–æ–Ω–æ—Å–æ–≤"](https://universiade.msu.ru/file/event/7866/eid7866_attach_9166106f01680b3825bf4aa058b132a589e5d580.pdf).


### –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

``` python
import opticaldevicelib as od
import numpy as np
import matplotlib.pyplot as plt
od.Optical_device.set_value(new_dx=5e-9, new_N=2**15)
```

–°–ø–æ—Å–æ–± –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–æ—á–µ—á–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ c —ç–Ω–µ—Ä–≥–∏–µ–π En –∏ —Ä–∞—Å–ø—Ä. –í–§ –Ω–∞
—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ z –æ—Ç –Ω–µ–≥–æ

``` python
p = od.Point_source(z=100, En=10) 
E_arr = p.E() # –ø–æ–ª—É—á–µ–Ω–Ω–∞—è –≤–æ–ª–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç —Ç–æ—á–µ—á–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
```

–ü—Ä–∏–º–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã—Ö (C21SO8SiH36) –ª–∏–Ω–∑ (–∏–¥–µ–∞–ª—å–Ω–∞—è –∏
–Ω–µ–∏–¥–µ–∞–ª—å–Ω–∞—è)


``` python
 N1_global = 10 # —á–∏—Å–ª–æ –ª–∏–Ω–∑ –≤ –º–∞—Å—Å–∏–≤–µ
 Copy_flag = False # —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π = True / —Å–ª—É—á–∞–π–Ω—ã–π –ø–æ–¥—Ö–æ–¥ = False
 arr_len = 2 if Copy_flag else 2*N1_global

 phases = 2*np.pi*np.random.rand(arr_len) # —Ñ–∞–∑—ã —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç–∏
 w_s = (np.random.rand(arr_len)-0.5)*np.pi/180*1 # –ø–æ–≤–æ—Ä–æ—Ç—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω—Ç—Ä–æ–≤ –ª–∏–Ω–∑
 s_s  = (np.random.rand(arr_len)-0.5)*2e-6*1 # –ø–æ–ø–µ—Ä–µ—á–Ω—ã–µ —Å–¥–≤–∏–≥–∏ –ª–∏–Ω–∑

 crl = od.CRL(lam=p.lam, arr_start=E_arr,\
                 R=5e-6, A=24e-6, d=5e-6, N1=N1_global, z=0,\
                     molecula="C21SO8SiH36", density=1.12, Flen=0, gap=0) # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏–Ω–∑—ã (–∏–¥–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å)

 crlm = od.CRLm(lam=p.lam, arr_start=E_arr,\
                     R=5e-6, A=24e-6, d=5e-6, N1=N1_global, z=0,\
                         molecula="C21SO8SiH36", density=1.12, Flen=0, gap=0,\
                             b=1e-6, m=3e6, copy=Copy_flag, arr_phase=phases, arr_s=s_s, arr_w=w_s) # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏–Ω–∑—ã (—à–µ—Ä–æ—Ö–æ–≤–∞—Ç—ã–π —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å)
                                
```
–ü—Ä–∏–º–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫—Ä–µ–º–Ω–∏–µ–≤—ã—Ö (Si) –ª–∏–Ω–∑ (–∏–¥–µ–∞–ª—å–Ω–∞—è –∏ –Ω–µ–∏–¥–µ–∞–ª—å–Ω–∞—è)

``` python
N1_global = 100 # —á–∏—Å–ª–æ –ª–∏–Ω–∑ –≤ –º–∞—Å—Å–∏–≤–µ
Copy_flag = True # —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π = True / —Å–ª—É—á–∞–π–Ω—ã–π –ø–æ–¥—Ö–æ–¥ = False
arr_len = 2 if Copy_flag else 2*N1_global

phases = 2*np.pi*np.random.rand(arr_len)*0 # —Ñ–∞–∑—ã —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç–∏
w_s = (np.random.rand(arr_len)-0.5)*np.pi/180*0 # –ø–æ–≤–æ—Ä–æ—Ç—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω—Ç—Ä–æ–≤ –ª–∏–Ω–∑
s_s  = (np.random.rand(arr_len)-0.5)*2e-6*0  # –ø–æ–ø–µ—Ä–µ—á–Ω—ã–µ —Å–¥–≤–∏–≥–∏ –ª–∏–Ω–∑

crl = od.CRL(lam=p.lam, arr_start=E_arr,\
                R=6.25e-6, A=50e-6, d=2e-6, N1=N1_global, z=0,\
                    molecula="Si", density=2.33, Flen=0, gap=0) # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏–Ω–∑—ã (–∏–¥–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å)

crlm = od.CRLm(lam=p.lam, arr_start=E_arr,\
                    R=6.25e-6, A=50e-6, d=2e-6, N1=N1_global, z=0,\
                        molecula="Si", density=2.33, Flen=0, gap=0,\
                            b=2e-7, m=3e8, copy=Copy_flag, arr_phase=phases, arr_s=s_s, arr_w=w_s) # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏–Ω–∑—ã (—à–µ—Ä–æ—Ö–æ–≤–∞—Ç—ã–π —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å)
```

!!!–í–∞–∂–Ω–æ!!! –ü–æ–¥—Å—á—ë—Ç –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–∫—É—Å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –ª–∏–Ω–∑

``` python
focus = crl.focus() # –ø–æ–¥—Å—á–µ—Ç —Ñ–æ–∫—É—Å–∞ –ø–æ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º—É–ª–µ
crl.set_z(z=focus) # —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–∫—É—Å–∞
crlm.set_z(z=focus) # —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–∫—É—Å–∞
```

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ –∏–∑–ª—É—á–µ–Ω–∏—è –≤ —Ñ–æ–∫—É—Å–µ

``` python
plt.plot(p.x, crl.I(), label="numerical CRL")
plt.plot(p.x, crlm.I(), label="numerical CRLm")
plt.legend()
plt.xlim(-5e-7, 5e-7)
plt.grid()
plt.show()
```
![](vertopal_49f43c458a9e444da55782d0fb585588/99226dcfadbb3ee16ada1870408ca2179b6f38d6.png)
